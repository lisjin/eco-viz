!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.vega||(t.vega={})).embed=e()}}(function(){var e;return function e(t,n,r){function i(u,a){if(!n[u]){if(!t[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(o)return o(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[u]={exports:{}};t[u][0].call(l.exports,function(e){var n=t[u][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.d3=t.d3||{})}(this,function(e){"use strict";function t(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===K&&t.documentElement.namespaceURI===K?t.createElement(e):t.createElementNS(n,e)}}function n(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function r(){return new i}function i(){this._="@"+(++ne).toString(36)}function o(e,t,n){return e=u(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function u(t,n,r){return function(i){var o=e.event;e.event=i;try{t.call(this,this.__data__,n,r)}finally{e.event=o}}}function a(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function c(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function s(e,t,n){var r=ae.hasOwnProperty(e.type)?o:u;return function(i,o,u){var a,c=this.__on,s=r(t,o,u);if(c)for(var l=0,f=c.length;l<f;++l)if((a=c[l]).type===e.type&&a.name===e.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=s,a.capture=n),void(a.value=t);this.addEventListener(e.type,s,n),a={type:e.type,name:e.name,value:t,listener:s,capture:n},c?c.push(a):this.__on=[a]}}function l(t,n,r,i){var o=e.event;t.sourceEvent=e.event,e.event=t;try{return n.apply(r,i)}finally{e.event=o}}function f(){}function h(){return[]}function p(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function v(e,t,n,r,i,o){for(var u,a=0,c=t.length,s=o.length;a<s;++a)(u=t[a])?(u.__data__=o[a],r[a]=u):n[a]=new p(e,o[a]);for(;a<c;++a)(u=t[a])&&(i[a]=u)}function d(e,t,n,r,i,o,u){var a,c,s,l={},f=t.length,h=o.length,v=new Array(f);for(a=0;a<f;++a)(c=t[a])&&(v[a]=s=xe+u.call(c,c.__data__,a,t),s in l?i[a]=c:l[s]=c);for(a=0;a<h;++a)s=xe+u.call(e,o[a],a,o),(c=l[s])?(r[a]=c,c.__data__=o[a],l[s]=null):n[a]=new p(e,o[a]);for(a=0;a<f;++a)(c=t[a])&&l[v[a]]===c&&(i[a]=c)}function g(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function m(e){return function(){this.removeAttribute(e)}}function _(e){return function(){this.removeAttributeNS(e.space,e.local)}}function y(e,t){return function(){this.setAttribute(e,t)}}function w(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function x(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function b(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function A(e){return function(){this.style.removeProperty(e)}}function S(e,t,n){return function(){this.style.setProperty(e,t,n)}}function E(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function N(e){return function(){delete this[e]}}function O(e,t){return function(){this[e]=t}}function T(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function L(e){return e.trim().split(/^|\s+/)}function C(e){return e.classList||new M(e)}function M(e){this._node=e,this._names=L(e.getAttribute("class")||"")}function q(e,t){for(var n=C(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function D(e,t){for(var n=C(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function P(e){return function(){q(this,e)}}function V(e){return function(){D(this,e)}}function j(e,t){return function(){(t.apply(this,arguments)?q:D)(this,e)}}function z(){this.textContent=""}function U(e){return function(){this.textContent=e}}function $(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function B(){this.innerHTML=""}function k(e){return function(){this.innerHTML=e}}function R(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function I(){this.nextSibling&&this.parentNode.appendChild(this)}function H(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function J(){return null}function G(){var e=this.parentNode;e&&e.removeChild(this)}function X(e,t,n){var r=Pe(e),i=r.CustomEvent;i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Y(e,t){return function(){return X(this,e,t)}}function F(e,t){return function(){return X(this,e,t.apply(this,arguments))}}function W(e,t){this._groups=e,this._parents=t}function Z(){return new W([[document.documentElement]],Xe)}var K="http://www.w3.org/1999/xhtml",Q={svg:"http://www.w3.org/2000/svg",xhtml:K,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ee=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Q.hasOwnProperty(t)?{space:Q[t],local:e}:e},te=function(e){var r=ee(e);return(r.local?n:t)(r)},ne=0;i.prototype=r.prototype={constructor:i,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var re=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var ie=document.documentElement;if(!ie.matches){var oe=ie.webkitMatchesSelector||ie.msMatchesSelector||ie.mozMatchesSelector||ie.oMatchesSelector;re=function(e){return function(){return oe.call(this,e)}}}}var ue=re,ae={};if(e.event=null,"undefined"!=typeof document){var ce=document.documentElement;"onmouseenter"in ce||(ae={mouseenter:"mouseover",mouseleave:"mouseout"})}var se=function(e,t,n){var r,i,o=a(e+""),u=o.length;{if(!(arguments.length<2)){for(l=t?s:c,null==n&&(n=!1),r=0;r<u;++r)this.each(l(o[r],t,n));return this}var l=this.node().__on;if(l)for(var f,h=0,p=l.length;h<p;++h)for(r=0,f=l[h];r<u;++r)if((i=o[r]).type===f.type&&i.name===f.name)return f.value}},le=function(){for(var t,n=e.event;t=n.sourceEvent;)n=t;return n},fe=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]},he=function(e){var t=le();return t.changedTouches&&(t=t.changedTouches[0]),fe(e,t)},pe=function(e){return null==e?f:function(){return this.querySelector(e)}},ve=function(e){"function"!=typeof e&&(e=pe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,u,a=t[i],c=a.length,s=r[i]=new Array(c),l=0;l<c;++l)(o=a[l])&&(u=e.call(o,o.__data__,l,a))&&("__data__"in o&&(u.__data__=o.__data__),s[l]=u);return new W(r,this._parents)},de=function(e){return null==e?h:function(){return this.querySelectorAll(e)}},ge=function(e){"function"!=typeof e&&(e=de(e));for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var u,a=t[o],c=a.length,s=0;s<c;++s)(u=a[s])&&(r.push(e.call(u,u.__data__,s,a)),i.push(u));return new W(r,i)},me=function(e){"function"!=typeof e&&(e=ue(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,u=t[i],a=u.length,c=r[i]=[],s=0;s<a;++s)(o=u[s])&&e.call(o,o.__data__,s,u)&&c.push(o);return new W(r,this._parents)},_e=function(e){return new Array(e.length)},ye=function(){return new W(this._enter||this._groups.map(_e),this._parents)};p.prototype={constructor:p,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var we=function(e){return function(){return e}},xe="$",be=function(e,t){if(!e)return p=new Array(this.size()),s=-1,this.each(function(e){p[++s]=e}),p;var n=t?d:v,r=this._parents,i=this._groups;"function"!=typeof e&&(e=we(e));for(var o=i.length,u=new Array(o),a=new Array(o),c=new Array(o),s=0;s<o;++s){var l=r[s],f=i[s],h=f.length,p=e.call(l,l&&l.__data__,s,r),g=p.length,m=a[s]=new Array(g),_=u[s]=new Array(g),y=c[s]=new Array(h);n(l,f,m,_,y,p,t);for(var w,x,b=0,A=0;b<g;++b)if(w=m[b]){for(b>=A&&(A=b+1);!(x=_[A])&&++A<g;);w._next=x||null}}return u=new W(u,r),u._enter=a,u._exit=c,u},Ae=function(){return new W(this._exit||this._groups.map(_e),this._parents)},Se=function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var c,s=t[a],l=n[a],f=s.length,h=u[a]=new Array(f),p=0;p<f;++p)(c=s[p]||l[p])&&(h[p]=c);for(;a<r;++a)u[a]=t[a];return new W(u,this._parents)},Ee=function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&u!==r.nextSibling&&u.parentNode.insertBefore(r,u),u=r);return this},Ne=function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=g);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var u,a=n[o],c=a.length,s=i[o]=new Array(c),l=0;l<c;++l)(u=a[l])&&(s[l]=u);s.sort(t)}return new W(i,this._parents).order()},Oe=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},Te=function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},Le=function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},Ce=function(){var e=0;return this.each(function(){++e}),e},Me=function(){return!this.node()},qe=function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],u=0,a=o.length;u<a;++u)(i=o[u])&&e.call(i,i.__data__,u,o);return this},De=function(e,t){var n=ee(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?_:m:"function"==typeof t?n.local?b:x:n.local?w:y)(n,t))},Pe=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView},Ve=function(e,t,n){var r;return arguments.length>1?this.each((null==t?A:"function"==typeof t?E:S)(e,t,null==n?"":n)):Pe(r=this.node()).getComputedStyle(r,null).getPropertyValue(e)},je=function(e,t){return arguments.length>1?this.each((null==t?N:"function"==typeof t?T:O)(e,t)):this.node()[e]};M.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ze=function(e,t){var n=L(e+"");if(arguments.length<2){for(var r=C(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?j:t?P:V)(n,t))},Ue=function(e){return arguments.length?this.each(null==e?z:("function"==typeof e?$:U)(e)):this.node().textContent},$e=function(e){return arguments.length?this.each(null==e?B:("function"==typeof e?R:k)(e)):this.node().innerHTML},Be=function(){return this.each(I)},ke=function(){return this.each(H)},Re=function(e){var t="function"==typeof e?e:te(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ie=function(e,t){var n="function"==typeof e?e:te(e),r=null==t?J:"function"==typeof t?t:pe(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},He=function(){return this.each(G)},Je=function(e){return arguments.length?this.property("__data__",e):this.node().__data__},Ge=function(e,t){return this.each(("function"==typeof t?F:Y)(e,t))},Xe=[null];W.prototype=Z.prototype={constructor:W,select:ve,selectAll:ge,filter:me,data:be,enter:ye,exit:Ae,merge:Se,order:Ee,sort:Ne,call:Oe,nodes:Te,node:Le,size:Ce,empty:Me,each:qe,attr:De,style:Ve,property:je,classed:ze,text:Ue,html:$e,raise:Be,lower:ke,append:Re,insert:Ie,remove:He,datum:Je,on:se,dispatch:Ge};var Ye=function(e){return"string"==typeof e?new W([[document.querySelector(e)]],[document.documentElement]):new W([[e]],Xe)},Fe=function(e){return"string"==typeof e?new W([document.querySelectorAll(e)],[document.documentElement]):new W([null==e?[]:e],Xe)},We=function(e,t,n){arguments.length<3&&(n=t,t=le().changedTouches);for(var r,i=0,o=t?t.length:0;i<o;++i)if((r=t[i]).identifier===n)return fe(e,r);return null},Ze=function(e,t){null==t&&(t=le().touches);for(var n=0,r=t?t.length:0,i=new Array(r);n<r;++n)i[n]=fe(e,t[n]);return i};e.creator=te,e.local=r,e.matcher=ue,e.mouse=he,e.namespace=ee,e.namespaces=Q,e.select=Ye,e.selectAll=Fe,e.selection=Z,e.selector=pe,e.selectorAll=de,e.touch=We,e.touches=Ze,e.window=Pe,e.customEvent=l,Object.defineProperty(e,"__esModule",{value:!0})})},{}],2:[function(e,t,n){"use strict";function r(e){var t=/\/schema\/([\w-]+)\/([\w\.]+)\.json$/g,n=t.exec(e).slice(1,3),r=n[0],i=n[1];return{library:r,version:i}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],3:[function(e,t,n){(function(n){function r(e,t,n,r,o){var u=a.loader();u.load(e).then(function(u){u?"config"===n?(t.opt.config=JSON.parse(u),i(r,t.spec,t.opt,o)):i(r,JSON.parse(u),t,o):console.error("No data found at "+e)}).catch(function(e){console.error(e)})}function i(e,t,n,c){var h,g,m=c||function(){},_=n&&n.renderer||"canvas",y=n&&n.actions||{};n=n||{};try{if(a.isString(t))return r(t,n,"url",e,c);if(h=JSON.stringify(t,null,2),a.isString(n.config))return r(n.config,{spec:t,opt:n},"config",e,c);var w,x;t.$schema?(w=f(t.$schema),n.mode&&n.mode!==p[w.library]&&console.warn('The given visualization spec is written in "'+w.library+'", but mode argument is assigned as "'+g+'".'),g=p[w.library],x=w.version.replace(/^v/g,""),0!==l(x,v[g])&&console.warn('The input spec uses "'+g+'" '+x+', but current version of "'+g+'" is '+v[g]+".")):g=p[n.mode]||p.vega,t=d[g](t),g===p["vega-lite"]&&t.$schema&&(w=f(t.$schema),x=w.version.replace(/^v/g,""),0!==l(x,v.vega)&&console.warn('The compiled spec uses "vega" '+x+', but current version of "vega" is '+v.vega+"."));var b=u.select(e).classed("vega-embed",!0).html("")}catch(e){m(e)}var A=a.parse(t,n.config);try{var S=new a.View(A).logLevel(a.Warn).initialize(document.querySelector(e)).renderer(_).hover().run();if(y!==!1){var E=b.append("div").attr("class","vega-actions");if(y.export!==!1){var N="canvas"===_?"png":"svg";E.append("a").text("Export as "+N.toUpperCase()).attr("href","#").attr("target","_blank").attr("download",(t.name||"vega")+"."+N).on("mousedown",function(){var e=this;S.toImageURL(N).then(function(t){e.href=t}).catch(function(e){throw e}),u.event.preventDefault()})}y.source!==!1&&E.append("a").text("View Source").attr("href","#").on("click",function(){o(h),u.event.preventDefault()}),y.editor!==!1&&E.append("a").text("Open in Vega Editor").attr("href","#").on("click",function(){s(window,i.config.editor_url,{spec:h,mode:g}),u.event.preventDefault()})}m(null,{view:S,spec:t})}catch(e){m(e)}}function o(e){var t="<html><head>"+h.source_header+'</head><body><pre><code class="json">',n="</code></pre>"+h.source_footer+"</body></html>",r=window.open("");r.document.write(t+e+n),r.document.title="Vega JSON Source"}var u=e("d3-selection"),a="undefined"!=typeof window?window.vega:"undefined"!=typeof n?n.vega:null,c="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,s=e("./post"),l=e("./version"),f=e("vega-schema-url-parser").default,h={editor_url:"http://vega.github.io/vega-editor/",source_header:"",source_footer:""},p={vega:"vega","vega-lite":"vega-lite"},v={vega:a.version,"vega-lite":c.version},d={vega:function(e){return e},"vega-lite":function(e){return c.compile(e).spec}};i.config=h,t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./post":4,"./version":5,"d3-selection":1,"vega-schema-url-parser":2}],4:[function(e,t,n){t.exports=function(e,t,n){function r(t){t.source===o&&(c=0,e.removeEventListener("message",r,!1))}function i(){c<=0||(o.postMessage(n,"*"),setTimeout(i,a),c-=1)}var o=e.open(t),u=1e4,a=250,c=~~(u/a);e.addEventListener("message",r,!1),setTimeout(i,a)}},{}],5:[function(e,t,n){t.exports=function(e,t,n){function r(e){return(i?/^\d+[A-Za-z]*$/:/^\d+$/).test(e)}var i=n&&n.lexicographical||!0,o=n&&n.zeroExtend||!0,u=n&&n.depth||2,a=e.split(".").splice(0,u),c=t.split(".").splice(0,u);if(!a.every(r)||!c.every(r))return NaN;if(o){for(;a.length<c.length;)a.push("0");for(;c.length<a.length;)c.push("0")}i||(a=a.map(Number),c=c.map(Number));for(var s=0;s<a.length;++s){if(c.length==s)return 1;if(a[s]!=c[s])return a[s]>c[s]?1:-1}return a.length!=c.length?-1:0}},{}]},{},[3])(3)});
